# 微服务


## 1. 基本概念

容灾：是指系统冗余部署，当一处由于意外停止工作，整个系统应用还可以正常工作。

容错：是指在运行中出现错误（如上下游故障或概率性失败）仍可正常提供服务。

可用性：描述的是系统可提供服务的时间长短。用公式来说就是A=MTBF/(MTBF+MTTR)，即正常工作时间/(正常工作时间+故障时间)。

可靠性：描述的是系统指定时间单位内无故障的次数。比如：一年365天，以天为单位来衡量。有天发生了故障，哪怕只有1秒，这天算不可靠。其他没有故障的是可靠的。

稳定性：这个业界没有明确的定义，我的理解是：在受到各种干扰时仍然能够提供符合预期的服务的能力。

从要求的严格程度上：``可用性<可靠性<稳定性`` 
可用性和可靠性更侧重于容灾，而稳定性同时包含容灾和容错


## 服务化基础构件

服务注册发现、配置管理、网关路由，到流控熔断、日志监控

1. 高可用，故障自动转移
2. 扩展性，服务发现：自动载入新服务节点配置（1 监控配置文件，并重新载入，2 配置中心回调，并重新载入）+动态连接池

3. 负载均衡：轮询，随机，静态权重，动态权重



## 发布类型

- 蓝绿发布:项目逻辑上分为AB组,先升级完A组提供稳定服务后，在升级B组
- 灰度发布: 先灰度一部分，在升级全量
- 滚动发布: 每次只升级一个或多个服务，升级完成后加入生产环境，不断执行这个过程，直到集群中的全部旧版本升级新版本



## 参考资料
[容灾容错](https://cloud.tencent.com/developer/article/1600624)
